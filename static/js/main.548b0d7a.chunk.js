(this["webpackJsonpdns-update-web"]=this["webpackJsonpdns-update-web"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(9),c=n.n(i),r=(n(16),n(3)),l=n(10),o=n(11),h=n(5),d=n(6),b=n(2),u=n(8),j=n(7),p=(n(17),n(0)),O=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;Object(h.a)(this,n),(a=t.call(this,e)).updateCredentials=a.updateCredentials.bind(Object(b.a)(a)),a.logout=a.logout.bind(Object(b.a)(a));var s="login",i=a.getSavedCredentials();return void 0!==i&&(s="loading"),a.state={hosts:null,screen:s,credentials:i},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){"loading"===this.state.screen&&this.updateCredentials(this.state.credentials)}},{key:"updateCredentials",value:function(e){var t=this;e.remember&&this.saveCredentials(e),this.setState((function(t,n){return{credentials:e,screen:"loading"}}),(function(){t.refreshHosts().then((function(){t.setState({screen:"hosts"})}))}))}},{key:"getSavedCredentials",value:function(){var e=localStorage.getItem("base_uri"),t=localStorage.getItem("api_key");if(null!==e&&null!==t)return{base_uri:e,api_key:t,remember:!0}}},{key:"clearSavedCredentials",value:function(){localStorage.removeItem("base_uri"),localStorage.removeItem("api_key")}},{key:"saveCredentials",value:function(e){localStorage.setItem("base_uri",e.base_uri),localStorage.setItem("api_key",e.api_key)}},{key:"logout",value:function(){this.clearSavedCredentials(),window.location.reload(!0)}},{key:"refreshHosts",value:function(){var e=this;return fetch("".concat(this.state.credentials.base_uri,"/hosts?show_ipv4=true&show_ipv6=true"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.credentials.api_key)}}).then((function(e){return e.json()})).then((function(t){e.setState({hosts:t.hosts})}))}},{key:"render",value:function(){return m[this.state.screen].call(this)}}]),n}(s.a.Component),m={login:function(){return Object(p.jsx)(g,{onSubmit:this.updateCredentials})},loading:function(){return Object(p.jsx)("p",{className:"loading",children:"Loading..."})},hosts:function(){var e=Object.entries(this.state.hosts).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)(v,{host:Object(l.a)({name:n},a)},n)}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"navbar",children:Object(p.jsx)("button",{onClick:this.logout,children:"Logout"})}),Object(p.jsx)("div",{className:"content",children:Object(p.jsxs)("table",{className:"host-table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Host"}),Object(p.jsx)("th",{children:"IPv4"}),Object(p.jsx)("th",{children:"IPv6"})]})}),Object(p.jsx)("tbody",{children:e})]})})]})}},v=function(e){var t="https://".concat(e.host.name);return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"host-name",children:Object(p.jsx)("a",{href:t,children:e.host.name})}),Object(p.jsx)(x,{ip:e.host.ipv4,enabled:e.host.ipv4_enabled,type:"ipv4"}),Object(p.jsx)(x,{ip:e.host.ipv6,enabled:e.host.ipv6_enabled,type:"ipv6"})]})},x=function(e){var t="ip-info type-".concat(e.type),n=e.enabled?Object(p.jsx)("table",{className:"ip-info",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),Object(p.jsx)("td",{className:"ip",children:e.ip.address})]}),Object(p.jsxs)("tr",{className:e.ip.last_ping!==(new Date).toISOString().split("T")[0]?"warning":void 0,children:[Object(p.jsx)("th",{children:"Last ping"}),Object(p.jsxs)("td",{children:[" ",e.ip.last_ping]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Last change"}),Object(p.jsx)("td",{children:e.ip.last_change})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Record ID"}),Object(p.jsx)("td",{children:e.ip.cf_dns_record_id})]})]})}):Object(p.jsx)("span",{class:"disabled",children:"Disabled"});return Object(p.jsx)("td",{className:t,children:n})};var g=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={base_uri:"",api_key:"",remember:!1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.onSubmit=e.onSubmit,a}return Object(d.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(r.a)({},t.name,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.onSubmit(this.state)}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"login-container",children:Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("label",{htmlFor:"base_uri",children:"Base URI"}),Object(p.jsx)("input",{name:"base_uri",type:"text",value:this.state.base_uri,onChange:this.handleChange}),Object(p.jsx)("label",{htmlFor:"api_key",children:"API Key"}),Object(p.jsx)("input",{name:"api_key",type:"password",value:this.state.api_key,onChange:this.handleChange}),Object(p.jsxs)("label",{htmlFor:"remember",children:[Object(p.jsx)("input",{name:"remember",type:"checkbox",value:this.state.remember,onChange:this.handleChange}),"Remember me"]}),Object(p.jsx)("button",{type:"submit",children:"Connect"})]})})}}]),n}(s.a.Component),f=O,y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(f,{})}),document.getElementById("root")),y()}},[[19,1,2]]]);
//# sourceMappingURL=main.548b0d7a.chunk.js.map